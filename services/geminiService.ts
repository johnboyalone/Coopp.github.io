import { Theme, Puzzle } from '../types';

// ข้อมูลปริศนาสำรองที่เราสร้างขึ้นเอง
const mockPuzzles: { [key in Theme]: Puzzle } = {
  [Theme.HauntedHouse]: {
    theme: Theme.HauntedHouse,
    story: "คุณและเพื่อนติดอยู่ในคฤหาสน์ร้าง ทั้งสองคนถูกขังอยู่คนละห้อง มีเพียงเสียงกระซิบของวิญญาณและวัตถุปริศนาเป็นเพื่อน คุณต้องร่วมมือกันไขความลับของคฤหาสน์เพื่อปลดปล่อยวิญญาณและหาทางออกก่อนจะถูกจองจำที่นี่ตลอดกาล!",
    solution: "1842",
    playerA: {
      objective: "หาลำดับการเคาะโลงศพที่ถูกต้องจากรูปภาพบนผนัง และบอกลำดับนั้นให้เพื่อนของคุณ",
      clues: [
        "บนผนังมีรูปภาพเก่าแก่ 4 ภาพ: แมงมุม (มี 8 ขา), หัวกะโหลก (มีฟัน 2 ซี่), เทียน (มี 1 เล่ม), และนาฬิกาโบราณ (ชี้เลข 4)",
        "มีโลงศพอยู่กลางห้อง เมื่อลองเคาะดูจะมีเสียงก้องกังวาน"
      ],
      interactiveElements: ["รูปภาพบนผนัง", "โลงศพ"]
    },
    playerB: {
      objective: "ถอดรหัสลำดับที่เพื่อนบอกโดยใช้สมุดบันทึกของผู้ดูแล และป้อนรหัส 4 หลักที่ได้ลงในกลไกประตู",
      clues: [
        "คุณเจอสมุดบันทึกของผู้ดูแล เขียนว่า: 'ลำดับการปลดปล่อยคือ สัตว์ -> สิ่งของ -> สิ่งมีชีวิต -> เวลา'",
        "ลำดับที่ถูกต้องจะให้ตัวเลขสำหรับรหัสผ่านประตู"
      ],
      interactiveElements: ["สมุดบันทึก", "กลไกประตู 4 หลัก"]
    }
  },
  [Theme.SecretLab]: {
    theme: Theme.SecretLab,
    story: "การทดลองไวรัสผิดพลาด! คุณและนักวิทยาศาสตร์อีกคนติดอยู่ในห้องแล็บที่กำลังจะเข้าสู่ภาวะกักกันถาวร คุณต้องหาทางหยุดระบบทำลายตัวเองให้ได้",
    solution: "8025",
    playerA: {
      objective: "ค้นหาสีของสารเคมีที่ต้องใช้ 4 ชนิดตามลำดับบนหน้าจอคอมพิวเตอร์ และบอกเพื่อนของคุณ",
      clues: [
        "หน้าจอคอมพิวเตอร์แสดงผล: 'ลำดับการทำให้เสถียร: แดง, เหลือง, น้ำเงิน, เขียว'",
        "มีหลอดทดลองหลายสีวางอยู่ แต่คุณไม่รู้ว่าสีไหนมีค่าเท่าไหร่"
      ],
      interactiveElements: ["คอมพิวเตอร์", "ชั้นวางหลอดทดลอง"]
    },
    playerB: {
      objective: "ใช้ตารางธาตุเพื่อแปลงลำดับสีที่เพื่อนบอกให้เป็นตัวเลข และป้อนรหัสเพื่อหยุดระบบ",
      clues: [
        "คุณเจอตารางธาตุที่ถูกขีดเขียนไว้: 'แดง = 8, น้ำเงิน = 2, เขียว = 5, เหลือง = 0'",
        "มีแผงควบคุมที่ต้องใช้รหัส 4 หลักเพื่อยกเลิกระบบทำลายตัวเอง"
      ],
      interactiveElements: ["ตารางธาตุ", "แผงควบคุม"]
    }
  },
  [Theme.MagicCastle]: {
    theme: Theme.MagicCastle,
    story: "พ่อมดชั่วร้ายได้ร่ายคำสาปไว้กับปราสาท คุณและสหายต้องร่วมมือกันถอนคำสาปก่อนที่ปราสาทจะสลายไป",
    solution: "7391",
    playerA: {
      objective: "มองออกไปนอกหน้าต่างเพื่อดูสัญลักษณ์เวทมนตร์ 4 อย่างที่ปรากฏบนท้องฟ้า และบอกลำดับให้เพื่อนของคุณ",
      clues: [
        "บนท้องฟ้าปรากฏสัญลักษณ์ตามลำดับ: ดวงดาว, พระจันทร์เสี้ยว, ดวงอาทิตย์, สายฟ้า",
        "ในห้องมีหนังสือเวทมนตร์มากมาย แต่ไม่มีเล่มไหนบอกความหมายของสัญลักษณ์"
      ],
      interactiveElements: ["หน้าต่าง", "กองหนังสือเวทมนตร์"]
    },
    playerB: {
      objective: "ใช้แผ่นศิลาจารึกเพื่อถอดรหัสสัญลักษณ์ที่เพื่อนบอก และใช้คทาเวทมนตร์ป้อนรหัสพลังงาน 4 หลัก",
      clues: [
        "คุณพบแผ่นศิลาจารึกโบราณสลักไว้ว่า: 'ดวงดาว=7, สายฟ้า=1, ดวงอาทิตย์=9, พระจันทร์เสี้ยว=3'",
        "มีแท่นสำหรับวางคทาเวทมนตร์เพื่อป้อนพลังงาน 4 หลัก"
      ],
      interactiveElements: ["แผ่นศิลาจารึก", "คทาเวทมนตร์"]
    }
  }
};

/**
 * ฟังก์ชันนี้จะคืนค่าปริศนาที่เตรียมไว้ล่วงหน้าตามธีมที่เลือก
 * ทำให้เกมสามารถทำงานได้โดยไม่ต้องใช้ Gemini API
 */
export const generatePuzzle = async (theme: Theme): Promise<Puzzle> => {
  console.log(`กำลังโหลดปริศนาสำรองสำหรับธีม: ${theme}`);
  
  // ใช้ Promise เพื่อจำลองการโหลดข้อมูล (เหมือนการเรียก API จริง)
  return new Promise(resolve => {
    setTimeout(() => {
      resolve(mockPuzzles[theme]);
    }, 1000); // หน่วงเวลา 1 วินาทีเพื่อให้เห็นหน้า Loading
  });
};
